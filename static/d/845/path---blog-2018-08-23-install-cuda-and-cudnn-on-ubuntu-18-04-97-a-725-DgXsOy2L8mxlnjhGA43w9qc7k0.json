{"data":{"site":{"siteMetadata":{"title":"zhoumingjun blog","author":"Mingjun Zhou"}},"markdownRemark":{"id":"2fc7c6f7-96ad-56c9-9674-eabc67a3c65c","excerpt":"Overview To run tensorflow/pytorch with gpu, I need to install cuda and cudnn.\nIt’s really tricky, but finally I found the method.  The…","html":"<h1>Overview</h1>\n<p>To run tensorflow/pytorch with gpu, I need to install cuda and cudnn.\nIt’s really tricky, but finally I found the method. </p>\n<p>The secret is   </p>\n<ul>\n<li>install the graphics driver from a PPA </li>\n<li>install the toolkit from the run file</li>\n</ul>\n<h1>packages</h1>\n<p>The following packages need to be installed.</p>\n<ul>\n<li>nvidia graphics driver     </li>\n<li>cuda 9.2  </li>\n<li>cudnn 7.2</li>\n</ul>\n<p>For nvidia graphics driver, there are two sources:</p>\n<ol>\n<li>\n<p>raphics-drivers/ppa:<br>\n<a href=\"https://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa\">https://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa</a><br>\nthe package is nvidia-driver-396</p>\n</li>\n<li>\n<p>nvidia official repo\n<a href=\"https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1710/x86_64/cuda-drivers_396.44-1_amd64.deb\">https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1710/x86<em>64/cuda-drivers</em>396.44-1_amd64.deb</a><br>\nthe package is cuda-drivers</p>\n</li>\n</ol>\n<p>In fact the nvidia cuda-drivers is for ubuntu 17.10, and there are no official nvidia repo for ubuntu 18.04 currently.<br>\nHere we need to select option 1, I have try option2, but there are conflict with other packages.<br>\nI install the cuda-drivers with “—force-overwrite”, but gdm can’t be launched normally.</p>\n<p>For cuda 9.2, it can be download directly from nvidia website.</p>\n<p>For cudnn7.2, <strong>it can be download from nvidia machine-learning repo without login</strong></p>\n<h1>installation steps</h1>\n<p>install nvidia graphics driver  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> add-apt-repository ppa:graphics-drivers/ppa\n<span class=\"token function\">sudo</span> apt update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nvidia-driver-396</code></pre>\n      </div>\n<p>install cuda    </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># dowload installer</span>\naria2c https://developer.nvidia.com/compute/cuda/9.2/Prod2/local_installers/cuda_9.2.148_396.37_linux \n\naria2c https://developer.nvidia.com/compute/cuda/9.2/Prod2/patches/1/cuda_9.2.148.1_linux  \n\n<span class=\"token comment\"># install cuda9.2 and patch</span>\n<span class=\"token function\">chmod</span> +x cuda*\n\n<span class=\"token function\">sudo</span> ./cuda_9.2.148_396.37_linux.run --verbose --silent --toolkit --override\n\n<span class=\"token function\">sudo</span> ./cuda_9.2.148.1_linux.run --silent --accept-eula\n\n<span class=\"token comment\"># add to ld</span>\n<span class=\"token function\">sudo</span> <span class=\"token keyword\">echo</span> <span class=\"token string\">\"/usr/local/cuda-9.2/lib64\"</span> <span class=\"token operator\">>></span> /etc/ld.so.conf\n<span class=\"token function\">sudo</span> ldconfig</code></pre>\n      </div>\n<p>install cudnn   </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#download packages</span>\naria2c https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/libcudnn7_7.2.1.38-1+cuda9.2_amd64.deb\n\naria2c https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/libcudnn7-dev_7.2.1.38-1+cuda9.2_amd64.deb    \n\n<span class=\"token comment\"># install</span>\n<span class=\"token function\">sudo</span> dpkg -i libcudnn7_7.2.1.38-1+cuda9.2_amd64.deb\n<span class=\"token function\">sudo</span> dpkg -i libcudnn7-dev_7.2.1.38-1+cuda9.2_amd64.deb</code></pre>\n      </div>","frontmatter":{"title":"Install cuda9.2 and cudnn7.2 on ubuntu 18.04","date":"August 23, 2018"}}},"pageContext":{"slug":"/blog/2018-08-23-install-cuda-and-cudnn-on-ubuntu18.04/","previous":{"fields":{"slug":"/note/gan/"},"frontmatter":{"title":"GAN"}},"next":null}}
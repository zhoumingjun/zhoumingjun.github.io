{"data":{"site":{"siteMetadata":{"title":"Mingjun Zhou's blog","author":"Mingjun Zhou","sourceUrl":"https://github.com/zhoumingjun/zhoumingjun.github.io/blob/source/","siteUrl":"https://zhoumingjun.github.io","disqusShortname":"zhoumingjun"}},"markdownRemark":{"id":"3bae2362-9b98-5b62-82e4-ac1fce5468f0","html":"<ul>\n<li>\n<p>docker int details<br>\n<a href=\"https://docker-k8s-lab.readthedocs.io/en/latest/index.html\">https://docker-k8s-lab.readthedocs.io/en/latest/index.html</a></p>\n</li>\n<li>\n<p>Container Namespaces – Deep Dive into Container Networking<br>\n<a href=\"https://platform9.com/blog/container-namespaces-deep-dive-container-networking/\">https://platform9.com/blog/container-namespaces-deep-dive-container-networking/</a></p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">container_name<span class=\"token operator\">=</span>xxx\npid<span class=\"token operator\">=</span><span class=\"token variable\"><span class=\"token variable\">$(</span>docker inspect -f <span class=\"token string\">'{{.State.Pid}}'</span> <span class=\"token string\">\"<span class=\"token variable\">$container_name</span>\"</span><span class=\"token variable\">)</span></span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">mkdir</span> -p /var/run/netns\n<span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> -sf /proc/<span class=\"token variable\">$pid</span>/ns/net <span class=\"token string\">\"/var/run/netns/<span class=\"token variable\">$container_name</span>\"</span>\n<span class=\"token function\">sudo</span> ip netns\n<span class=\"token function\">sudo</span> ip netns <span class=\"token function\">exec</span> <span class=\"token string\">\"<span class=\"token variable\">$container_name</span>\"</span> ip a</code></pre></div>\n<ul>\n<li>netadmin\nDocker containers do not have full privileges by default. Try adding this to the docker run command:</li>\n</ul>\n<p>  —cap-add=NET_ADMIN</p>","fileAbsolutePath":"/home/zhoumingjun/github.com/zhoumingjun/zhoumingjun.github.io/content/knowledgebase/visualization/docker/network.md","fields":{"permalink":"2018/08-31T14:44:53Z/network-in deep","category":"knowledgebase"},"frontmatter":{"title":"network in deep","date":"August 31, 2018"}}},"pageContext":{"permalink":"2018/08-31T14:44:53Z/network-in deep","toc":"{\"children\":{\"docker\":{\"children\":{\"network\":{\"post\":{\"internal\":{\"content\":\"\\n* docker int details    \\nhttps://docker-k8s-lab.readthedocs.io/en/latest/index.html\\n\\n* Container Namespaces – Deep Dive into Container Networking    \\nhttps://platform9.com/blog/container-namespaces-deep-dive-container-networking/\\n\\n```bash\\ncontainer_name=xxx\\npid=$(docker inspect -f '{{.State.Pid}}' \\\"$container_name\\\")\\nsudo mkdir -p /var/run/netns\\nsudo ln -sf /proc/$pid/ns/net \\\"/var/run/netns/$container_name\\\"\\nsudo ip netns\\nsudo ip netns exec \\\"$container_name\\\" ip a\\n```\\n\\n* netadmin\\nDocker containers do not have full privileges by default. Try adding this to the docker run command:\\n\\n\\n  --cap-add=NET_ADMIN\\n\"},\"fields\":{\"fpath\":\"/knowledgebase/visualization/docker/network/\",\"permalink\":\"2018/08-31T14:44:53Z/network-in deep\",\"category\":\"knowledgebase\"},\"frontmatter\":{\"title\":\"network in deep\",\"date\":\"2018-08-31\",\"tags\":[\"visualization\",\"docker\"],\"desc\":null,\"slug\":null}}}},\"post\":{\"internal\":{\"content\":\"\\nxx\"},\"fields\":{\"fpath\":\"/knowledgebase/visualization/docker/\",\"permalink\":\"2018/08-31T11:44:53Z/docker\",\"category\":\"knowledgebase\"},\"frontmatter\":{\"title\":\"docker\",\"date\":\"2018-08-31\",\"tags\":[\"visualization\",\"docker\"],\"desc\":null,\"slug\":null}}}},\"post\":{\"internal\":{\"content\":\"\\nVisualization\"},\"fields\":{\"fpath\":\"/knowledgebase/visualization/\",\"permalink\":\"2018/08-31T10:44:53Z/visualization\",\"category\":\"knowledgebase\"},\"frontmatter\":{\"title\":\"visualization\",\"date\":\"2018-08-31\",\"tags\":[\"visualization\"],\"desc\":null,\"slug\":null}}}","next":null,"prev":{"internal":{"content":"\nxx"},"fields":{"fpath":"/knowledgebase/visualization/docker/","permalink":"2018/08-31T11:44:53Z/docker","category":"knowledgebase"},"frontmatter":{"title":"docker","date":"2018-08-31","tags":["visualization","docker"],"desc":null,"slug":null}}}}
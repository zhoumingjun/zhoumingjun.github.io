{"data":{"site":{"siteMetadata":{"title":"zhoumingjun blog","author":"Mingjun Zhou"}},"markdownRemark":{"id":"e2177623-a99b-56e5-bac4-0f2e0c6d17dc","excerpt":"+++\ndate = “2017-03-10T11:40:12+08:00”\ntitle = “Using MathJax and Graphviz with Hugo”\nCategories =  “blog” \nTags =  “tricks” \nDescription…","html":"<p>+++\ndate = “2017-03-10T11:40:12+08:00”\ntitle = “Using MathJax and Graphviz with Hugo”\nCategories = [“blog”]\nTags = [“tricks”]\nDescription = “Using MathJax and Graphviz with Hugo”\nmenu = \"\"\nmath = true\nviz = true\n+++</p>\n<h1>MathJax support</h1>\n<h2>configuration</h2>\n<p><a href=\"https://gohugo.io/tutorials/mathjax/\">Hugo doc</a><br>\n<a href=\"http://docs.mathjax.org/en/latest/configuration.html?#using-plain-javascript\">MathJax doc</a>     </p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">&lt;!-- LaTeX math rendering --&gt;\n{{ if  .Params.math   }}\n&lt;script type=&quot;text/javascript&quot;&gt;\n    window.MathJax = {\n        tex2jax: {\n            inlineMath: [[&#39;$&#39;,&#39;$&#39;], [&#39;\\\\(&#39;,&#39;\\\\)&#39;]],\n            displayMath: [[&#39;$$&#39;,&#39;$$&#39;], [&#39;\\[&#39;,&#39;\\]&#39;]],\n            processEscapes: true,\n            processEnvironments: true,\n            skipTags: [&#39;script&#39;, &#39;noscript&#39;, &#39;style&#39;, &#39;textarea&#39;, &#39;pre&#39;],\n            TeX: { equationNumbers: { autoNumber: &quot;AMS&quot; },\n                extensions: [&quot;AMSmath.js&quot;, &quot;AMSsymbols.js&quot;, &quot;color.js&quot;] }\n        },\n        AuthorInit: function () {\n            MathJax.Hub.Register.StartupHook(&quot;Begin&quot;,function () {\n                MathJax.Hub.Queue(function() {\n                    var all = MathJax.Hub.getAllJax(), i;\n                    for(i = 0; i &lt; all.length; i += 1) {\n                        all[i].SourceElement().parentNode.className += &#39; has-jax&#39;;\n                    }\n                })\n            });\n        }\n    };\n&lt;/script&gt;\n&lt;script  type=&quot;text/javascript&quot;\n    src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;\n&lt;/script&gt;\n{{ end }}</code></pre>\n      </div>\n<h2>example</h2>\n<p><strong>code</strong>    </p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">    `$ v_\\pi(s) = \\sum_{a \\in \\mathcal{A}} \\pi(a|s) q_\\pi(s,a)  $`</code></pre>\n      </div>\n<p><strong>result</strong><br>\n<code class=\"language-text\">$ v_\\pi(s) = \\sum_{a \\in \\mathcal{A}} \\pi(a|s) q_\\pi(s,a)  $</code></p>\n<h1>graphviz support</h1>\n<h2>configuration</h2>\n<div class=\"gatsby-highlight\" data-language=\"html\">\n      <pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- graphviz renderring --></span>\n{{ if  .Params.viz}}\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>//cdnjs.cloudflare.com/ajax/libs/viz.js/1.7.1/viz.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\"> </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script language-javascript\">\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> vizPrefix <span class=\"token operator\">=</span> <span class=\"token string\">\"language-viz-\"</span><span class=\"token punctuation\">;</span>\n    Array<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>forEach<span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"[class^=\"</span> <span class=\"token operator\">+</span> vizPrefix <span class=\"token operator\">+</span> <span class=\"token string\">\"]\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> engine<span class=\"token punctuation\">;</span>\n        x<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span>vizPrefix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                engine <span class=\"token operator\">=</span> cls<span class=\"token punctuation\">.</span><span class=\"token function\">substr</span><span class=\"token punctuation\">(</span>vizPrefix<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> image <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">DOMParser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseFromString</span><span class=\"token punctuation\">(</span><span class=\"token function\">Viz</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">.</span>innerText<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>format<span class=\"token punctuation\">:</span><span class=\"token string\">\"svg\"</span><span class=\"token punctuation\">,</span> engine<span class=\"token punctuation\">:</span>engine<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"image/svg+xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        x<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        x<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span>\n        x<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token string\">\"white\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n{{ end }}</code></pre>\n      </div>\n<h2>example</h2>\n<p><strong>code</strong>        </p>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">    ```viz-dot\n    digraph g { \n    node[shape=&quot;circle&quot; , label=&quot;&quot;, width=0.2, height=0.2]\n    l1[xlabel=&quot;v\\(s\\)&quot;]\n    l21[xlabel=&quot;a&quot;, width=0.1, height=0.1 , style=filled]\n    l22[width=0.1, height=0.1, style=filled]\n    l31[xlabel=&quot;v\\(s&#39;\\)&quot;]\n\n    l1 -&gt; l21\n    l1 -&gt; l22\n    l21 -&gt; l31 [xlabel=&quot;r&quot;]\n    l21 -&gt; l32\n    l22 -&gt; l33\n    l22 -&gt; l34\n    }\n    ```</code></pre>\n      </div>\n<p><strong>result</strong>   </p>\n<div class=\"gatsby-highlight\" data-language=\"viz-dot\">\n      <pre class=\"language-viz-dot\"><code class=\"language-viz-dot\">digraph g { \n   node[shape=&quot;circle&quot; , label=&quot;&quot;, width=0.2, height=0.2]\n   l1[xlabel=&quot;v\\(s\\)&quot;]\n   l21[xlabel=&quot;a&quot;, width=0.1, height=0.1 , style=filled]\n   l22[width=0.1, height=0.1, style=filled]\n   l31[xlabel=&quot;v\\(s&#39;\\)&quot;]\n\n   l1 -&gt; l21\n   l1 -&gt; l22\n   l21 -&gt; l31 [xlabel=&quot;r&quot;]\n   l21 -&gt; l32\n   l22 -&gt; l33\n   l22 -&gt; l34\n}</code></pre>\n      </div>","frontmatter":{"title":"","date":null}}},"pageContext":{"slug":"/note/using_mathjax_viz_with_hugo/","previous":{"fields":{"slug":"/about/"},"frontmatter":{"title":"About"}},"next":{"fields":{"slug":"/post/lvs_keepalived/"},"frontmatter":{"title":""}}}}
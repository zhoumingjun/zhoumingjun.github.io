{"data":{"site":{"siteMetadata":{"title":"Mingjun Zhou's blog","author":"Mingjun Zhou","description":"personal blog"}}},"pageContext":{"posts":[{"internal":{"content":"---\ntitle : \"Enable mathjax in gatsby\"\ndate : \"2018-09-04T06:30:28Z\"\ntags : [\"gatsby\", \"mathjax\"]\n---\n\n# how to enable mathjax in gatsby\n\n# Steps\n\n## 1. Configure gatsby-config.js\n```\n// In your gatsby-config.js\nplugins: [\n  {\n    resolve: `gatsby-transformer-remark`,\n    options: {\n      plugins: [\n        `gatsby-remark-mathjax`,\n      ],\n    },\n  },\n],\n```\n\n## 2. Customize html.js\nFollows the [official document](https://www.gatsbyjs.org/docs/custom-html/)   \n\nHere is my [html.js](https://github.com/zhoumingjun/zhoumingjun.github.io/blob/source/src/html.js)\n\n```javascript\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MathJaxConfig = `\nMathJax.Hub.Config({\n  messageStyle: 'none',\n  showProcessingMessages: false,\n  extensions: ['[a11y]/auto-collapse.js'],\n  'auto-collapse': {\n    disabled: false\n  },\n  SVG: {\n    linebreaks: {\n      automatic: true,\n      width: 'container'\n    }\n  },\n  tex2jax: {\n    inlineMath: [ ['$','$'], ['\\\\(','\\\\)'] ],\n    processEscapes: true\n  }\n});`;\n\nexport default class HTML extends React.Component {\n  render() {\n    return (\n      <html {...this.props.htmlAttributes}>\n        <head>\n          <meta charSet=\"utf-8\" />\n          <meta httpEquiv=\"x-ua-compatible\" content=\"ie=edge\" />\n          <meta\n            name=\"viewport\"\n            content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"\n          />\n          {this.props.headComponents}\n        </head>\n        <body {...this.props.bodyAttributes}>\n          {this.props.preBodyComponents}\n          <div\n            key={`body`}\n            id=\"___gatsby\"\n            dangerouslySetInnerHTML={{__html: this.props.body}}\n          />\n          {this.props.postBodyComponents}\n          <script\n            type=\"text/x-mathjax-config\"\n            dangerouslySetInnerHTML={{__html: MathJaxConfig}}\n          />\n          <script\n            defer\n            src=\"https://cdn.bootcss.com/mathjax/2.7.4/latest.js?config=TeX-AMS_SVG\"\n          />\n        </body>\n      </html>\n    );\n  }\n}\n\nHTML.propTypes = {\n  htmlAttributes: PropTypes.object,\n  headComponents: PropTypes.array,\n  bodyAttributes: PropTypes.object,\n  preBodyComponents: PropTypes.array,\n  body: PropTypes.string,\n  postBodyComponents: PropTypes.array,\n};\n\n```\n\n## 3. Configure gatsby-browser.js\nMathJax will process all math equations when the location changed.\n\nHere is my [gatsby-brower.js](https://github.com/zhoumingjun/zhoumingjun.github.io/blob/source/gatsby-browser.js)\n\n```\nexports.onRouteUpdate = ({location}) => {\n  console.log('new pathname', location.pathname);\n  if (window.MathJax !== undefined) {\n    MathJax.Hub.Queue(['Typeset', MathJax.Hub]);\n  }\n};\n\n```"},"fields":{"slug":"/post/2018-09-04-enable-mathjax-in-gatsby/","category":"post"},"frontmatter":{"title":"Enable mathjax in gatsby","date":"2018-09-04T06:30:28Z","tags":["gatsby","mathjax"]}}],"tag":"gatsby","pagesSum":1,"page":0}}
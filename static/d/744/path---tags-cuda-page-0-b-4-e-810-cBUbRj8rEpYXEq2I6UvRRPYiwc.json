{"pageContext":{"posts":[{"internal":{"content":"---\ntitle: \"Install cuda9.2 and cudnn7.2 on ubuntu 18.04\"\ndateCreated: \"2018-08-23T15:01:49Z\"\ntags: [\"cuda\", \"ubuntu\"]\n---\n\n# Overview\nTo run tensorflow/pytorch with gpu, I need to install cuda and cudnn.\nIt's really tricky, but finally I found the method. \n\nThe secret is   \n* install the graphics driver from a PPA \n* install the toolkit from the run file\n\n# packages\nThe following packages need to be installed.\n* nvidia graphics driver     \n* cuda 9.2  \n* cudnn 7.2\n\nFor nvidia graphics driver, there are two sources:\n1. raphics-drivers/ppa:     \nhttps://launchpad.net/~graphics-drivers/+archive/ubuntu/ppa         \nthe package is nvidia-driver-396\n\n2. nvidia official repo\nhttps://developer.download.nvidia.com/compute/cuda/repos/ubuntu1710/x86_64/cuda-drivers_396.44-1_amd64.deb  \nthe package is cuda-drivers\n\nIn fact the nvidia cuda-drivers is for ubuntu 17.10, and there are no official nvidia repo for ubuntu 18.04 currently.  \nHere we need to select option 1, I have try option2, but there are conflict with other packages.    \nI install the cuda-drivers with \"--force-overwrite\", but gdm can't be launched normally.\n\nFor cuda 9.2, it can be download directly from nvidia website.\n\nFor cudnn7.2, **it can be download from nvidia machine-learning repo without login**\n\n\n# installation steps\n\ninstall nvidia graphics driver  \n\n```bash \nsudo add-apt-repository ppa:graphics-drivers/ppa\nsudo apt update\nsudo apt-get install nvidia-driver-396\n```\n\ninstall cuda    \n\n```bash\n# dowload installer\naria2c https://developer.nvidia.com/compute/cuda/9.2/Prod2/local_installers/cuda_9.2.148_396.37_linux \n\naria2c https://developer.nvidia.com/compute/cuda/9.2/Prod2/patches/1/cuda_9.2.148.1_linux  \n\n# install cuda9.2 and patch\nchmod +x cuda*\n\nsudo ./cuda_9.2.148_396.37_linux.run --verbose --silent --toolkit --override\n\nsudo ./cuda_9.2.148.1_linux.run --silent --accept-eula\n\n# add to ld\nsudo echo \"/usr/local/cuda-9.2/lib64\" >> /etc/ld.so.conf\nsudo ldconfig\n```\n\ninstall cudnn   \n```bash\n#download packages\naria2c https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/libcudnn7_7.2.1.38-1+cuda9.2_amd64.deb\n\naria2c https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1604/x86_64/libcudnn7-dev_7.2.1.38-1+cuda9.2_amd64.deb    \n\n# install\nsudo dpkg -i libcudnn7_7.2.1.38-1+cuda9.2_amd64.deb\nsudo dpkg -i libcudnn7-dev_7.2.1.38-1+cuda9.2_amd64.deb\n```\n"},"fields":{"slug":"/post/2018-08-23-install-cuda-and-cudnn-on-ubuntu18.04/","category":"post"},"frontmatter":{"title":"Install cuda9.2 and cudnn7.2 on ubuntu 18.04","dateCreated":"2018-08-23T15:01:49Z","tags":["cuda","ubuntu"],"desc":null}}],"tag":"cuda","pagesSum":1,"page":0}}